---
title: Flask 浅析
date: 2020-11-11 17:26:02
tags:
---

![壁纸](03.jfif)

flask 浅析

<!--more-->



#### 1 简述

flask 微框架



#### 2 flask 请求处理流程



![flask 请求处理简化流程](001.png)



#### 3 flask 相关细节分析

##### 3.1  Local, LocalProxy, LocalStack, LocalManager 扮演什么角色, 解决什么问题?



对比 django 与 flask 是怎么传递请求对象的？ 

**\#Django**

```Python
from django.http import HttpResponse


def index(request):
    text = request.GET.get('params')
    return HttpResponse(f'Response: {text}')
```

**\#Flask**

```python
from flask import Flask, request

app = Flask(__name__)


@app.route('/')
def index():
    text = request.args.get('params')
    return f'Response: {text}’)
```

Django 的视图函数，要显式的传递 request （请求对象）。而Flask 中的 request (请求对象) 是 import 进来使用的。

<br>

Flask 中的 Local Context 变量有如下几个, 他们的应用与 Local, LocalProxy, LocalStack, LocalManager 息息相关， 可以在多线程，绿色协程环境下，安全的传递变量。

**flask/globals.py**

```python
#context locals
_request_ctx_stack = LocalStack()
_app_ctx_stack = LocalStack()
current_app: "Flask" = LocalProxy(_find_app)
request: "Request" = LocalProxy(partial(_lookup_req_object, "request"))
session: "SessionMixin" = LocalProxy(partial(_lookup_req_object, "session"))
g: "_AppCtxGlobals" = LocalProxy(partial(_lookup_app_object, "g"))
```









##### 3.2 信号处理



使用示例



原理浅析







##### 3.3 多 app 应用处理



##### 3.4 blueprint



##### 3.5 session 处理



#### 4 Flask 插件架构



























































